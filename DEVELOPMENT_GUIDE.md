# FX Sign Development Guide

## ğŸ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶
- Node.js 18+
- Docker & Docker Compose
- Git

### ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **PostgreSQLèµ·å‹•**
   ```bash
   docker-compose up -d postgres
   ```

2. **ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   # Backend
   cd backend && npm install
   
   # Frontend
   cd ../frontend && npm install
   ```

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–**
   ```bash
   cd backend
   npx prisma generate
   npx prisma migrate dev
   ```

4. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•**
   ```bash
   # Backend (åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)
   cd backend && NODE_ENV=development npm run dev
   
   # Frontend (åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)
   cd frontend && npm run dev
   ```

## ğŸ” èªè¨¼ãƒ»ãƒ­ã‚°ã‚¤ãƒ³

### é–‹ç™ºç’°å¢ƒãƒ­ã‚°ã‚¤ãƒ³
é–‹ç™ºç’°å¢ƒã§ã¯æœ¬ç•ªã¨åŒã˜èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ:**
- **ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼**: `test@example.com` / `dev123`
- **ç®¡ç†è€…**: `admin@example.com` / `admin123`

**ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•:**
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (http://localhost:5173) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
3. è‡ªå‹•ã§ãƒ¡ã‚¤ãƒ³ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

### èªè¨¼ã‚·ã‚¹ãƒ†ãƒ è©³ç´°
- **JWTèªè¨¼**: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ (15åˆ†) + ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ (7æ—¥)
- **è‡ªå‹•æ›´æ–°**: ãƒˆãƒ¼ã‚¯ãƒ³æœŸé™åˆ‡ã‚Œæ™‚ã®è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
- **æ°¸ç¶šåŒ–**: ãƒ–ãƒ©ã‚¦ã‚¶å†èµ·å‹•å¾Œã‚‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶­æŒ

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†

### æ¥ç¶šæƒ…å ±
```
Host: localhost:5432
Database: fx_sign_db
Username: fxuser
Password: fxpass123
```

### åŸºæœ¬æ“ä½œ
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ
PGPASSWORD=fxpass123 psql -h localhost -U fxuser -d fx_sign_db -c "SELECT 1;"

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ç¢ºèª
PGPASSWORD=fxpass123 psql -h localhost -U fxuser -d fx_sign_db -c "SELECT id, email, plan_type FROM users;"

# GUIç®¡ç†ãƒ„ãƒ¼ãƒ« (pgAdmin)
docker-compose --profile tools up -d pgadmin
# â†’ http://localhost:8080 (admin@fxsign.local / admin123)
```

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```bash
cd backend

# ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´å¾Œã®æ–°è¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npx prisma migrate dev --name "description_of_changes"

# é–‹ç™ºç’°å¢ƒãƒªã‚»ãƒƒãƒˆ (ãƒ‡ãƒ¼ã‚¿å‰Šé™¤)
npx prisma migrate reset

# Prisma Clientå†ç”Ÿæˆ
npx prisma generate
```

## ğŸ›  é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥
- **main**: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ (è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤æœ‰åŠ¹)
- **feature/\***: æ–°æ©Ÿèƒ½é–‹ç™º
- **fix/\***: ãƒã‚°ä¿®æ­£

### é–‹ç™ºæ‰‹é †
1. **æ©Ÿèƒ½é–‹ç™º**
   ```bash
   git checkout -b feature/new-feature
   # é–‹ç™ºä½œæ¥­
   ```

2. **å“è³ªãƒã‚§ãƒƒã‚¯**
   ```bash
   # Backend
   cd backend
   npm run lint
   npm run build
   npm test
   
   # Frontend
   cd frontend
   npm run lint
   npm run build
   npm test -- --run
   ```

3. **ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œç¢ºèª**
   - é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã§ã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
   - ãƒ–ãƒ©ã‚¦ã‚¶ã§ã® UI/UX ç¢ºèª
   - API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ

4. **ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥**
   ```bash
   git add .
   git commit -m "feat: æ–°æ©Ÿèƒ½ã®èª¬æ˜"
   git push origin feature/new-feature
   ```

### ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# mainãƒ–ãƒ©ãƒ³ãƒã¸ãƒãƒ¼ã‚¸å¾Œã€è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
git checkout main
git merge feature/new-feature
git push origin main

# ãƒ‡ãƒ—ãƒ­ã‚¤ç›£è¦–
gh run list --repo rising4718/fx-sign01 --limit 1
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**1. ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„**
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª: `docker-compose ps`
- ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª: users ãƒ†ãƒ¼ãƒ–ãƒ«ç…§ä¼š
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª

**2. ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„**
- WebSocketæ¥ç¶šçŠ¶æ³ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèª
- GMO API ã‚­ãƒ¼ã®è¨­å®šç¢ºèª (.env.development)
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª

**3. ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼**
- `npm run lint` ã§ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ç¢ºèª
- `npm run build` ã§TypeScriptã‚¨ãƒ©ãƒ¼ç¢ºèª
- ä¾å­˜é–¢ä¿‚æ›´æ–°: `npm install`

**4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼**
- PostgreSQLã‚³ãƒ³ãƒ†ãƒŠç¢ºèª: `docker-compose logs postgres`
- æ¥ç¶šæ–‡å­—åˆ—ç¢ºèª: DATABASE_URL
- ãƒãƒ¼ãƒˆç«¶åˆç¢ºèª: `lsof -i :5432`

### ãƒ­ã‚°ç¢ºèª
```bash
# Backendé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°
# ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ç›´æ¥è¡¨ç¤º

# PostgreSQLãƒ­ã‚°
docker-compose logs postgres

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚° (å¿…è¦æ™‚ã®ã¿)
ssh root@46.250.250.63 'pm2 logs fx-sign-backend'
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
fx-sign01/
â”œâ”€â”€ backend/                # Node.js Express API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/        # API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ services/      # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ models/        # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â””â”€â”€ server.ts      # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ prisma/           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ frontend/              # React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ contexts/     # Context API
â”‚   â”‚   â”œâ”€â”€ hooks/        # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ pages/        # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ services/     # API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ database/             # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ docker-compose.yml    # é–‹ç™ºç’°å¢ƒè¨­å®š
```

## ğŸ¯ é‡è¦ãªé–‹ç™ºãƒ«ãƒ¼ãƒ«

1. **ç’°å¢ƒåˆ†é›¢**: é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã‚’æ˜ç¢ºã«åˆ†é›¢
2. **å“è³ªé‡è¦–**: å…¨ã¦ã®ãƒ—ãƒƒã‚·ãƒ¥å‰ã«lintãƒ»buildãƒ»testã‚’å®Ÿè¡Œ
3. **ãƒ‡ãƒ¼ã‚¿ä¿è­·**: æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ç¦æ­¢
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚æ›´æ–°
5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: API ã‚­ãƒ¼ç­‰ã®æ©Ÿå¯†æƒ…å ±ã¯ã‚³ãƒŸãƒƒãƒˆç¦æ­¢

---

**æœ€çµ‚æ›´æ–°**: 2025-09-11  
**å¯¾å¿œãƒãƒ¼ã‚¸ãƒ§ãƒ³**: FX Sign v2.4.0