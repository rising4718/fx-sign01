# FX Sign Tool - æŠ€è¡“ä»•æ§˜æ›¸ v3.0

> **æœ¬æ ¼çš„WEBã‚µãƒ¼ãƒ“ã‚¹ä»•æ§˜ - Enterprise Grade FX Trading Platform**

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„
- TORBã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã«ã‚ˆã‚‹FXå–å¼•æ”¯æ´ãƒ„ãƒ¼ãƒ«
- ãƒ‡ãƒ¢ç’°å¢ƒã§ã®å®‰å…¨ãªå­¦ç¿’ãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒæä¾›
- æ®µéšçš„ãªãƒªã‚¢ãƒ«å–å¼•å¯¾å¿œ

### é–‹ç™ºçŠ¶æ³ (2025å¹´9æœˆ10æ—¥ç¾åœ¨)

#### âœ… Core Platform (å®Œäº†)
- **Frontend**: React 18 + TypeScript + Ant Design
- **Backend**: Node.js 22 + Express + TypeScript + WebSocket
- **Database**: Prisma ORM + PostgreSQL (ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†)
- **Authentication**: JWT + ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **UI/UX**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œãƒ»ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: GitHub Actionsè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»PM2ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†

#### âœ… Real-time Data System (å®Œäº†)
- **GMOã‚³ã‚¤ãƒ³FX APIçµ±åˆ**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ä½¿ç”¨ãƒ»ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿å®Œå…¨æ’é™¤
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼æ›´æ–°**: 2ç§’é–“éš”ãƒ»WebSocketé…ä¿¡æº–å‚™æ¸ˆã¿
- **ãƒãƒ£ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ **: Canvasæç”»ãƒ»5åˆ†è¶³/15åˆ†è¶³å¯¾å¿œ
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ­£è¦åŒ–**: JSTè¡¨ç¤ºãƒ»Unixæ™‚é–“å¤‰æ›
- **APIç›£è¦–**: æˆåŠŸç‡è¿½è·¡ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### ğŸš€ Business Features (å®Œäº†)
- **P&Lç®¡ç†**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç›Šè¨ˆç®—ãƒ»å±¥æ­´ç®¡ç†
- **è¨­å®šã‚·ã‚¹ãƒ†ãƒ **: åŒ…æ‹¬çš„å–å¼•è¨­å®šãƒ»ãƒ‡ãƒ¢/ãƒªã‚¢ãƒ«åˆ‡æ›¿
- **TORBã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼**: ãƒ¬ãƒ³ã‚¸åˆ¤å®šãƒ»å£²è²·ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ**: æ—¥åˆ¥ãƒ»æœˆåˆ¥ãƒ¬ãƒãƒ¼ãƒˆ

#### âœ… Performance Optimization (å®Œäº†)
- **Phase1**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (localStorage/IndexedDB) - å®Œäº†
- **Phase2**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰DBå±¥æ­´ãƒ‡ãƒ¼ã‚¿è“„ç© - å®Œäº†
- **Phase3**: WebSocketãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é…ä¿¡ãƒ»å·®åˆ†æ›´æ–° - å®Œäº†

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### Enterprise System Architecture

#### Current Production Architecture (v3.0)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Production Environment                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Frontend      â”‚    â”‚    Backend      â”‚    â”‚  External APIs  â”‚  â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚  â”‚
â”‚  â”‚ â€¢ React 18      â”‚â—„â”€â”€â–ºâ”‚ â€¢ Node.js 22    â”‚â—„â”€â”€â–ºâ”‚ â€¢ GMO Coin FX   â”‚  â”‚
â”‚  â”‚ â€¢ TypeScript    â”‚    â”‚ â€¢ Express       â”‚    â”‚   /ticker       â”‚  â”‚
â”‚  â”‚ â€¢ Ant Design    â”‚    â”‚ â€¢ WebSocket     â”‚    â”‚   /klines       â”‚  â”‚
â”‚  â”‚ â€¢ Canvas Charts â”‚    â”‚ â€¢ TORB Engine   â”‚    â”‚ â€¢ Discord Bot   â”‚  â”‚
â”‚  â”‚ â€¢ localStorage  â”‚    â”‚ â€¢ Prisma ORM    â”‚    â”‚ â€¢ LINE (äºˆå®š)   â”‚  â”‚
â”‚  â”‚ â€¢ IndexedDB     â”‚    â”‚ â€¢ PostgreSQL    â”‚    â”‚                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Production Infrastructure                     â”‚    â”‚
â”‚  â”‚ â€¢ Contabo VPS: 6vCPU, 12GB RAM, 100GB NVMe              â”‚    â”‚
â”‚  â”‚ â€¢ GitHub Actions CI/CD                                   â”‚    â”‚
â”‚  â”‚ â€¢ PM2 Process Management                                 â”‚    â”‚
â”‚  â”‚ â€¢ Nginx Reverse Proxy                                   â”‚    â”‚
â”‚  â”‚ â€¢ SSL/TLS Certificate                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Next-Generation Architecture (Roadmap)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Enterprise Scalable Architecture                       â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Frontend      â”‚   â”‚    API Gateway    â”‚   â”‚       Microservices       â”‚ â”‚
â”‚ â”‚ â€¢ React 18      â”‚â”€â”€â–ºâ”‚ â€¢ Rate Limiting   â”‚â”€â”€â–ºâ”‚ â€¢ Market Data Service     â”‚ â”‚
â”‚ â”‚ â€¢ TypeScript    â”‚   â”‚ â€¢ Authentication  â”‚   â”‚ â€¢ Trading Engine Service  â”‚ â”‚
â”‚ â”‚ â€¢ PWA Support   â”‚   â”‚ â€¢ Load Balancing  â”‚   â”‚ â€¢ Notification Service    â”‚ â”‚
â”‚ â”‚ â€¢ Service Workerâ”‚   â”‚ â€¢ API Versioning  â”‚   â”‚ â€¢ Analytics Service       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                        Data Layer                                      â”‚ â”‚
â”‚ â”‚ â€¢ Redis Cache â€¢ PostgreSQL Cluster â€¢ InfluxDB (Time-series)           â”‚ â”‚
â”‚ â”‚ â€¢ Elasticsearch (Logs) â€¢ S3 Compatible Storage                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Real-time Market Data System

### Current Implementation (Production Ready)

#### GMOã‚³ã‚¤ãƒ³FX APIçµ±åˆ
```typescript
// å®Ÿè£…çŠ¶æ³: å®Œå…¨çµ±åˆæ¸ˆã¿
ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:
â€¢ GET /public/v1/ticker         // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼ (2ç§’é–“éš”)
â€¢ GET /public/v1/klines         // å±¥æ­´ãƒ‡ãƒ¼ã‚¿ (5min/15min)

ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼:
GMO API â†’ fxDataService.ts â†’ /api/v1/fx/* â†’ Frontend
ãƒ¬ãƒ¼ãƒˆåˆ¶é™:
â€¢ Ticker: 1å›/ç§’ (ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ã)
â€¢ KLines: 5å›/åˆ† (12ç§’é–“éš”)
```

#### ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```
ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹å¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ â†’ GMO API â†’ å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—          â”‚
â”‚                                                                           â”‚
â”‚ å•é¡Œç‚¹:                                                                 â”‚
â”‚ â€¢ ãƒšãƒ¼ã‚¸æ›´æ–°æ¯ã«32æœ¬ã®ãƒ­ãƒ¼ã‚½ã‚¯è¶³ã‚’å…¨ã¦å†å–å¾—                        â”‚
â”‚ â€¢ APIè² è·ãŒé«˜ãã€ç„¡é§„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯                  â”‚
â”‚ â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°å¢—åŠ æ™‚ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å•é¡Œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… Performance Optimization Implementation (å®Ÿè£…å®Œäº†)

#### Phase 1: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ– (âœ… å®Œäº†)
```typescript
// å®Ÿè£…å®Œäº†æŠ€è¡“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥å±¤:
â€¢ localStorage: è¨­å®šãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± - å®Ÿè£…æ¸ˆã¿
â€¢ IndexedDB: ãƒãƒ£ãƒ¼ãƒˆå±¥æ­´ãƒ‡ãƒ¼ã‚¿ (æœ€å¤§1000æœ¬) - å®Ÿè£…æ¸ˆã¿
â€¢ Memory Cache: ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ (2ç§’TTL) - å®Ÿè£…æ¸ˆã¿

å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:
â€¢ frontend/src/services/cacheService.ts (480è¡Œ)
â€¢ 3å±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ãƒ»è‡ªå‹•æœŸé™åˆ‡ã‚Œå‡¦ç†
```

#### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰DBãƒ‡ãƒ¼ã‚¿è“„ç© (âœ… å®Œäº†)
```typescript
// å®Ÿè£…å®Œäº†ã‚·ã‚¹ãƒ†ãƒ 
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:
â€¢ price_history ãƒ†ãƒ¼ãƒ–ãƒ« - 30ç§’é–“éš”ä¾¡æ ¼åé›†
â€¢ candle_data ãƒ†ãƒ¼ãƒ–ãƒ« - 5åˆ†é–“éš”ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«åé›†
â€¢ api_stats ãƒ†ãƒ¼ãƒ–ãƒ« - APIçµ±è¨ˆç®¡ç†
â€¢ system_metrics ãƒ†ãƒ¼ãƒ–ãƒ« - ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–

å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:
â€¢ backend/src/services/historyAccumulationService.ts (353è¡Œ)
â€¢ å®šæœŸãƒ‡ãƒ¼ã‚¿åé›†ãƒ»è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

#### Phase 3: WebSocketãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é…ä¿¡ (âœ… å®Œäº†)
```typescript
// å®Ÿè£…å®Œäº†ã‚·ã‚¹ãƒ†ãƒ 
WebSocketã‚µãƒ¼ãƒãƒ¼:
â€¢ backend/src/server.ts - WebSocketçµ±åˆå®Œäº†
â€¢ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰hookçµ±åˆå®Œäº†
â€¢ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼ãƒ»ã‚·ã‚°ãƒŠãƒ«é…ä¿¡

å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:
â€¢ frontend/src/hooks/useWebSocket.ts
â€¢ frontend/src/services/websocketService.ts
â€¢ è‡ªå‹•å†æ¥ç¶šãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Œå‚™
```

## ğŸš€ Production Deployment

### ç¾åœ¨ã®ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒ (2025å¹´ç¢ºå®š)
```
ã‚µãƒ¼ãƒãƒ¼: Contabo Cloud VPS 20
- CPU: 6vCPU
- RAM: 12GB  
- Storage: 100GB NVMe
- Region: æ±äº¬ï¼ˆã‚¢ã‚¸ã‚¢ï¼‰
- OS: Ubuntu 24.04 LTS
- Runtime: Node.js 22 LTS
- Web Server: Nginx + PM2
- Database: PostgreSQL 16
- SSL: Let's Encrypt
- æœˆé¡: â‚¬11.3
```

### æ–°æ©Ÿèƒ½è¨­è¨ˆ

#### 1. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ… å®Ÿè£…å®Œäº†ãƒ»2025-09-09ï¼‰

```typescript
interface PriceUpdateInfo {
  lastUpdateTime: Date | null;
  updateCount: number;        // ç·æ›´æ–°å›æ•°
  lastChange: number;         // æœ€å¾Œã®ä¾¡æ ¼å¤‰å‹•
  apiSuccessCount: number;    // APIæˆåŠŸå›æ•°
  fallbackCount: number;      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä½¿ç”¨å›æ•°
}

// 1ç§’é–“éš”ã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
const interval = setInterval(async () => {
  try {
    // å®Ÿéš›ã®FX APIä¾¡æ ¼å–å¾—
    const currentPriceData = await fxApiService.getCurrentPrice('USDJPY');
    if (currentPriceData) {
      // æ­£å¸¸å–å¾—æ™‚ï¼šå®Ÿä¾¡æ ¼ã§æ›´æ–°
      setCurrentPrice(currentPriceData.price);
      // æ›´æ–°çµ±è¨ˆã‚’è¿½è·¡
      setPriceUpdateInfo(prev => ({
        lastUpdateTime: new Date(),
        updateCount: prev.updateCount + 1,
        lastChange: currentPriceData.price - currentPrice,
        apiSuccessCount: prev.apiSuccessCount + 1,
        fallbackCount: prev.fallbackCount
      }));
    } else {
      // APIå¤±æ•—æ™‚ï¼šã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆä¾¡æ ¼ç”Ÿæˆ
      // ğŸš¨ é‡è¦ï¼šGMOã‚³ã‚¤ãƒ³FX APIæœ€å„ªå…ˆãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ™‚ã‚‚å®Ÿä¾¡æ ¼ãƒ™ãƒ¼ã‚¹ç”Ÿæˆ
      setCurrentPrice(prev => {
        const volatility = 0.002; // é©åˆ‡ãªãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£
        const priceChange = (Math.random() - 0.5) * volatility;
        return Number((prev + priceChange).toFixed(3));
      });
    }
    
    // ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚‚åŒæœŸæ›´æ–°
    await updateChartData();
  } catch (error) {
    console.error('Price update error:', error);
  }
}, 1000);
```

**ç‰¹å¾´:**
- âœ… **å®Ÿä¾¡æ ¼ã®ã¿ä½¿ç”¨**: GMOã‚³ã‚¤ãƒ³FX API â†’ Alpha Vantage â†’ ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆç”Ÿæˆ
- âœ… **GMOã‚³ã‚¤ãƒ³FX APIæœ€å„ªå…ˆ**: å®Ÿä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿ãƒ»ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿å®Œå…¨æ’é™¤
- âœ… **åŒæœŸãƒãƒ£ãƒ¼ãƒˆæ›´æ–°**: ä¾¡æ ¼ãƒ»ãƒãƒ£ãƒ¼ãƒˆã®å®Œå…¨åŒæœŸ
- âœ… **è©³ç´°ç›£è¦–**: ãƒ‡ãƒãƒƒã‚°ã‚¿ãƒ–ã§ã®æˆåŠŸç‡ãƒ»æ›´æ–°çŠ¶æ³è¡¨ç¤º
- âœ… **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥**: APIéšœå®³æ™‚ã®é©åˆ‡ãªä¾¡æ ¼ç”Ÿæˆ

#### 2. ãƒ‡ãƒ¢/ãƒªã‚¢ãƒ«åˆ‡æ›¿ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ… å®Ÿè£…å®Œäº†ï¼‰
```typescript
interface AppSettings {
  trading: {
    mode: 'demo' | 'real';
    autoTrading: boolean;
    maxPositions: number;
    forceCloseTime: string;
  };
  demo: {
    initialBalance: number;
    currentBalance: number;
    lotSize: number;
    riskPercentage: number;
    pipValue: number;
  };
  real: {
    brokerId: string;
    apiKey: string;
    secretKey: string;
    accountType: 'live' | 'sandbox';
  };
  notifications: {
    discord: { enabled: boolean; webhookUrl: string; };
    email: { enabled: boolean; address: string; };
    sound: { enabled: boolean; volume: number; };
  };
  risk: {
    maxDrawdown: number;
    dailyLossLimit: number;
    maxDailyTrades: number;
    emergencyStop: boolean;
  };
}
```

#### 2. è¨­å®šç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ… å®Ÿè£…å®Œäº†ï¼‰
- âœ… React Context ã«ã‚ˆã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†
- âœ… localStorage ã«ã‚ˆã‚‹æ°¸ç¶šåŒ–
- âœ… åŒ…æ‹¬çš„ãªè¨­å®šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨­å®šåæ˜ 

#### 3. P&Lè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ï¼ˆâœ… å®Ÿè£…å®Œäº†ï¼‰
- âœ… è¨­å®šå€¤é€£å‹•ã®æç›Šè¨ˆç®—
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å«ã¿æç›Šè¡¨ç¤º
- âœ… ãƒ‡ãƒ¢/ãƒªã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

#### 2. è¨­å®šç®¡ç†
```typescript
interface AppSettings {
  trading: {
    mode: 'demo' | 'real';
    autoTrading: boolean;
    maxPositions: number;
    forceCloseTime: string;
  };
  notifications: {
    discord: boolean;
    email: boolean;
    sound: boolean;
  };
  risk: {
    maxDrawdown: number;
    dailyLossLimit: number;
  };
}
```

## æ©Ÿèƒ½ä»•æ§˜

### Phase 1: ãƒ‡ãƒ¢/ãƒªã‚¢ãƒ«åˆ‡æ›¿ (å®Ÿè£…ä¸­)

#### 1.1 UIå®Ÿè£…
- **å ´æ‰€**: ãƒ˜ãƒƒãƒ€ãƒ¼å³å´ã«ãƒˆã‚°ãƒ«ã‚¹ã‚¤ãƒƒãƒ
- **è¡¨ç¤º**: ğŸ® DEMO / ğŸ’° REAL
- **çŠ¶æ…‹ç®¡ç†**: React Context + LocalStorage

#### 1.2 è¨­å®šã‚¿ãƒ–è¿½åŠ 
```
ğŸ“‹ è¨­å®šã‚¿ãƒ–
â”œâ”€â”€ ğŸ’° è³‡é‡‘è¨­å®š
â”‚   â”œâ”€â”€ ãƒ‡ãƒ¢åˆæœŸè³‡é‡‘: Â¥300,000
â”‚   â”œâ”€â”€ å–å¼•ãƒ­ãƒƒãƒˆæ•°: 10,000é€šè²¨  
â”‚   â””â”€â”€ ãƒªã‚¹ã‚¯è¨±å®¹åº¦: 2%
â”œâ”€â”€ ğŸ¤– è‡ªå‹•å–å¼•è¨­å®š
â”‚   â”œâ”€â”€ è‡ªå‹•å–å¼•: ON/OFF
â”‚   â”œâ”€â”€ æœ€å¤§åŒæ™‚ãƒã‚¸ã‚·ãƒ§ãƒ³: 1
â”‚   â””â”€â”€ å¼·åˆ¶æ±ºæ¸ˆæ™‚åˆ»: 15:00
â””â”€â”€ ğŸ”” é€šçŸ¥è¨­å®š
    â”œâ”€â”€ Discord Webhook
    â”œâ”€â”€ éŸ³å£°ã‚¢ãƒ©ãƒ¼ãƒˆ
    â””â”€â”€ å–å¼•å®Œäº†é€šçŸ¥
```

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å¼·åŒ–

#### 2.1 å–å¼•ã‚¨ãƒ³ã‚¸ãƒ³
- ãƒ‡ãƒ¢å–å¼•å®Œå…¨å®Ÿè£…
- P&Lè¨ˆç®—ç²¾åº¦å‘ä¸Š
- ãƒªã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½

#### 2.2 ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- è¨­å®šãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–
- å–å¼•å±¥æ­´ã®è©³ç´°è¨˜éŒ²
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ

### Phase 3: å¤–éƒ¨é€£æº

#### 3.1 APIæº–å‚™
- ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼APIæŠ½è±¡åŒ–å±¤
- æ¥ç¶šç®¡ç†ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

#### 3.2 é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- Discord/LINEé€£æº
- é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆé€šçŸ¥
- ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šé€šçŸ¥

## æŠ€è¡“å®Ÿè£…è©³ç´°

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆæ›´æ–°äºˆå®š
```
frontend/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ AntHeader.tsx (âœ… å®Œæˆ)
â”‚   â”œâ”€â”€ DualChart.tsx (âœ… å®Œæˆ)
â”‚   â””â”€â”€ TradingModeToggle.tsx (ğŸ”„ æ–°è¦)
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ TradingPage.tsx (âœ… å®Œæˆ)
â”‚   â”œâ”€â”€ SettingsPage.tsx (ğŸ”„ æ–°è¦)
â”‚   â””â”€â”€ ResultsPage.tsx
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ TradingContext.tsx (ğŸ”„ æ–°è¦)
â”‚   â””â”€â”€ SettingsContext.tsx (ğŸ”„ æ–°è¦)
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ trading.ts (ğŸ”„ æ‹¡å¼µ)
â”‚   â””â”€â”€ settings.ts (ğŸ”„ æ–°è¦)
â””â”€â”€ services/
    â”œâ”€â”€ demoTrading.ts (ğŸ”„ æ–°è¦)
    â””â”€â”€ notifications.ts (ğŸ”„ æ–°è¦)
```

### çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ
```typescript
// TradingContext
interface TradingState {
  mode: 'demo' | 'real';
  balance: number;
  positions: Position[];
  dailyStats: DailyStats;
  settings: TradingSettings;
}

// Actions
type TradingAction =
  | { type: 'SWITCH_MODE'; payload: 'demo' | 'real' }
  | { type: 'UPDATE_BALANCE'; payload: number }
  | { type: 'OPEN_POSITION'; payload: Position }
  | { type: 'CLOSE_POSITION'; payload: string }
  | { type: 'UPDATE_SETTINGS'; payload: Partial<TradingSettings> };
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 1. ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰
- **ãƒ‡ãƒ¼ã‚¿åˆ†é›¢**: ãƒªã‚¢ãƒ«ãƒ‡ãƒ¼ã‚¿ã¨ã®å®Œå…¨åˆ†é›¢
- **è¦–è¦šçš„åŒºåˆ¥**: èƒŒæ™¯è‰²ãƒ»ãƒœãƒ¼ãƒ€ãƒ¼ã§æ˜ç¢ºåŒ–
- **è¨­å®šä¿è­·**: èª¤æ“ä½œé˜²æ­¢

### 2. ãƒªã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ‰ (å°†æ¥)
- **APIèªè¨¼**: å®‰å…¨ãªã‚­ãƒ¼ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**: æ©Ÿå¯†æƒ…å ±ä¿è­·
- **ç›£æŸ»ãƒ­ã‚°**: å…¨å–å¼•è¨˜éŒ²

### 3. å…¨èˆ¬
- **å…¥åŠ›æ¤œè¨¼**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®æ¤œè¨¼
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: é©åˆ‡ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: APIå‘¼ã³å‡ºã—åˆ¶å¾¡

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- åˆæœŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°: < 3ç§’
- ãƒãƒ£ãƒ¼ãƒˆæç”»: < 1ç§’
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°: 1ç§’é–“éš”

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- TORBè¨ˆç®—: < 500ms
- WebSocketå¿œç­”: < 100ms
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ: < 200ms

## é‹ç”¨ãƒ»ä¿å®ˆ

### ç›£è¦–é …ç›®
- ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡: 99.9%ä»¥ä¸Š
- ã‚¨ãƒ©ãƒ¼ç‡: < 0.1%
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: < 512MB

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- è¨­å®šãƒ‡ãƒ¼ã‚¿: æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- å–å¼•å±¥æ­´: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¤‡è£½
- ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«: 30æ—¥é–“ä¿æŒ

## ä»Šå¾Œã®å±•é–‹

### çŸ­æœŸ (1-2ãƒ¶æœˆ)
1. ãƒ‡ãƒ¢/ãƒªã‚¢ãƒ«åˆ‡æ›¿å®Œæˆ
2. è¨­å®šç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
3. é€šçŸ¥æ©Ÿèƒ½åŸºç¤

### ä¸­æœŸ (3-6ãƒ¶æœˆ)
1. APIé€£æºæº–å‚™
2. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½
3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ

### é•·æœŸ (6ãƒ¶æœˆä»¥ä¸Š)
1. è¤‡æ•°ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼å¯¾å¿œ
2. é«˜åº¦ãªåˆ†ææ©Ÿèƒ½
3. ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª


## ğŸ¯ Business Value & ROI

### æŠ€è¡“çš„ä¾¡å€¤
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 90%ã®APIè² è·å‰Šæ¸›ç›®æ¨™
- **å¯ç”¨æ€§**: 99.99%ã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒ é”æˆç›®æ¨™  
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: 10,000åŒæ™‚æ¥ç¶šå¯¾å¿œç›®æ¨™
- **ã‚³ã‚¹ãƒˆåŠ¹ç‡**: ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ã‚¹ãƒˆ50%å‰Šæ¸›ç›®æ¨™

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹æ”¹å–„
- **å¿œç­”é€Ÿåº¦**: < 100mså¹³å‡ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç›®æ¨™
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§**: 10msä»¥ä¸‹ã®é…ä¿¡é…å»¶ç›®æ¨™
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**: Service Workeræ´»ç”¨ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸å®‰å¯¾å¿œ
- **ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–**: PWAå¯¾å¿œãƒ»è»½é‡åŒ–

### äº‹æ¥­çš„ä¾¡å€¤
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦**: é«˜æ€§èƒ½ã«ã‚ˆã‚‹ç¶™ç¶šåˆ©ç”¨ä¿ƒé€²
- **é‹ç”¨åŠ¹ç‡**: è‡ªå‹•åŒ–ã«ã‚ˆã‚‹é‹ç”¨ã‚³ã‚¹ãƒˆå‰Šæ¸›
- **ç«¶åˆå„ªä½æ€§**: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´šã®ä¿¡é ¼æ€§ã¨æ€§èƒ½
- **æ‹¡å¼µæ€§**: å°†æ¥çš„ãªã‚µãƒ¼ãƒ“ã‚¹æ‹¡å¼µã®å …ç‰¢ãªåŸºç›¤

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´9æœˆ10æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v3.0 Enterprise Edition  
**è²¬ä»»è€…**: FX Sign Development Team